# Shelfy – Specification

## 1. 概要
Shelfy は「棚（Shelf）」という概念で  
ファイル・フォルダ・URL の参照を整理し、  
**グローバルホットキーで即呼び出して起動できる軽量ランチャー**である。

本仕様は UI / DB / OS 実装に依存せず、  
**アプリケーションの振る舞い（Use Cases）とルール（Domain）**のみを定義する。

---

## 2. 基本コンセプト
- タグを使わない
- 分類ではなく「置く」
- 実体ファイルは移動・変更しない
- 起動体験を最優先する

---

## 3. ドメイン概念

### 3.1 Shelf
- アイテム参照を格納する論理的な「棚」
- ツリー構造を持つ
- 並び順を保持する
- ピン留め可能

### 3.2 Item
- Shelf に属する参照
- 種別：
  - File
  - Folder
  - URL
- 実体は保持せず「参照情報」のみを持つ
- メモを付与できる（任意）
- 作成日時・最終アクセス日時を保持する
- 並び順を保持する

---

## 4. ドメインルール

- Item は必ず 1 つの Shelf に属する
- 同一 Shelf 内で同一参照（type + target）は重複不可
- 表示名は空文字不可
- 実体の存在可否は「状態」として扱う（削除はしない）

---

## 5. ユースケース（利用者視点の操作）

### Shelf 操作
- Shelf を作成できる
- Shelf 名を変更できる
- Shelf を階層移動できる
- Shelf を削除できる（配下含む）
- Shelf をピン留め / 解除できる
- Shelf の並び順を変更できる

### Item 操作
- File / Folder / URL を Shelf に追加できる
- Item を Shelf から削除できる（参照のみ）
- Item の表示名を変更できる
- Item のメモを編集できる
- Item を別の Shelf に移動できる
- Item の並び順を変更できる
- Item を起動できる
- 親フォルダを開ける（File / Folder）

### データ管理
- 全データを JSON ファイルにエクスポートできる
- JSON ファイルからデータをインポートできる（全置換 / マージ）

---

## 6. 起動後の挙動ルール
- 通常：Item 起動後に Shelfy を非表示にする
- 例外：ホットキー押下中は非表示にしない

※ この判断は **Use Case の責務**とする

---

## 7. 検索
- 即時検索
- 対象：
  - Shelf 名
  - Item 表示名
  - 参照先（パス / URL）
  - メモ
- プレフィックス指定：
  - `box:`
  - `type:`
  - `in:`

---

## 8. 非機能要件
- ローカル完結
- 常駐前提
- 高速起動
- 実装技術に依存しないルール定義
